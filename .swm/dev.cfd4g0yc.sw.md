---
id: cfd4g0yc
title: Dev
file_version: 1.1.3
app_version: 1.13.13
---

# Introduction

This document will walk you through the implementation of the filtering feature for the neighborhood map in our application. The feature allows users to filter locations displayed on the map based on categories. This is achieved by integrating the Isotope library for filtering and sorting, and Google Maps for displaying the locations. We will cover:

1.  How the filtering feature is implemented.

2.  How the Isotope library is used for filtering.

3.  How the Google Maps markers are manipulated based on the filter.

# Implementing the filtering feature

The filtering feature is implemented in the `ðŸ“„ js/neighborhood.js` file. The main logic of the feature is contained in the click event handler for the category menu items. When a category menu item is clicked, the function checks if the item is checked. If it is, the function adds the item's filter value to the filters array. If it's not checked, the function removes the item's filter value from the filters array.

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ js/neighborhood.js
```javascript
87     
88     
89      //filtering
90         var container = $('#locations');
91         var filters = []
92         jQuery('.cat-menu li a').on( 'click', function(event) {
93           var $target = $( event.currentTarget );
94           $target.toggleClass('is-checked');
95           var isChecked = $target.hasClass('is-checked');
96           var filterValue = $target.attr('data-filter');
```

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ js/neighborhood.js
```javascript
121    
122        function addFilter( filter ) {
123          if ( filters.indexOf( filter ) == -1 ) {
124            filters.push( filter );
125          }
126        }
127    
128        function removeFilter( filter ) {
129          var index = filters.indexOf( filter);
130          if ( index != -1 ) {
131            filters.splice( index, 1 );
132          }
133        }
```

<br/>

# Using the Isotope library for filtering

The Isotope library is used to filter the locations displayed in the locations container. The library provides a filter method that takes a filter value as an argument. In our implementation, we pass the filters array joined by commas as the filter value. This allows us to filter the locations based on multiple categories at once.

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ js/neighborhood.js
```javascript
97     
98           if ( isChecked ) {
99             addFilter( filterValue );
100    
101          } else {
102            removeFilter( filterValue );
103          }
104          // filter isotope
105          // group filters together, inclusive
106          container.isotope({ filter: filters.join(',') });
```

<br/>

# Manipulating Google Maps markers based on the filter

After filtering the locations using the Isotope library, we then manipulate the visibility of the Google Maps markers based on the filter. We loop through each location in the locations container and check if it's hidden. If it is, we get the marker id from the location's link and set the corresponding marker's visibility to false. If it's not hidden, we set the marker's visibility to true.

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ js/neighborhood.js
```javascript
107    
108          //filter markers
109          $('#locations .row').each(function(){
110            var div = $(this);
111            if(div.css('display') === 'none'){
112              var markerid = $('a', this).attr('data-markerid');
113              console.log($('a', this).attr('data-markerid'));
114              markers[markerid].setVisible(false);
115            } else{
116              markers[markerid].setVisible(true);
117            }
118            //console.log($('#locations .row').not(':hidden').each(function(){ $('a',this).attr('data-markerid')}));
119          });
120        });
```

<br/>

This way, the markers displayed on the map always match the locations displayed in the locations container. This provides a seamless user experience, as the map always reflects the current filter.

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBd3AtbWFwcyUzQSUzQWRlbGlvbjE=/docs/cfd4g0yc).
